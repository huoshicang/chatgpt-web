import{r as f,i as P,k as g,z as T,e as u,o as K,c as S,f as t,w as s,H as U,A as c,g as q,l as I,J as y}from"./index-nHbdToTU.js";import{_ as V}from"./_plugin-vue_export-helper-x3n3nnut.js";const B={id:"keyIndex"},M={__name:"KeyIndex",setup(N){const m=f(null),i=P(),a=g({encryption:"",key:"",modelGroup:"GPT3.5",account:"保密",password:"保密"}),v={key:{required:!0,message:"请选择输入密钥",trigger:["input","blur"]},modelGroup:{required:!0,message:"请选择选择分组",trigger:["input","blur"]},account:{required:!0,message:"请输入密钥所属的账号",trigger:["input","blur"]},password:{required:!0,message:"请输入密钥所属的密码",trigger:["input","blur"]}},k=[{label:"GPT3.5",value:"GPT3.5"},{label:"GPT4",value:"GPT4"}],_=f([]),d=g({page:1,pageSize:5,showSizePicker:!0,pageSizes:[5,7],onChange:o=>{d.page=o}}),w=[{title:"密钥混淆",key:"encryption"},{title:"密钥",key:"key"},{title:"分组",key:"modelGroup"},{title:"所属密码",key:"password"},{title:"所属账号",key:"account"},{title:"使用人数",key:"chat_usage"},{title:"操作",key:"操作",render(o){return U(y,{type:"error",size:"small",onClick:()=>G(o)},{default:()=>"删除"})}}],b=o=>{var e;o.preventDefault(),(e=m.value)==null||e.validate(async r=>{if(!r){const n=await c.addKey(a);n.code===200?(i.success("添加成功"),await p()):i.error(n.message)}})},G=async o=>{const e=await c.deleteKey(o);e.code===200?(i.success("删除成功"),await p()):i.error(e.message)},p=async()=>{const o=await c.getKey({page:d.page,pageSize:d.pageSize});o.code===200?_.value=o.data:i.error(o.message)};return T(async()=>{await p()}),(o,e)=>{const r=u("n-input"),n=u("n-form-item"),x=u("n-select"),h=u("n-form"),z=u("n-divider"),C=u("n-data-table");return K(),S("div",B,[t(h,{ref_key:"formRef",ref:m,inline:"",model:a,rules:v,size:"medium"},{default:s(()=>[t(n,{label:"密钥混淆",path:"encryption"},{default:s(()=>[t(r,{value:a.encryption,"onUpdate:value":e[0]||(e[0]=l=>a.encryption=l),placeholder:"输入混淆"},null,8,["value"])]),_:1}),t(n,{label:"密钥",path:"key"},{default:s(()=>[t(r,{style:{width:"500px"},value:a.key,"onUpdate:value":e[1]||(e[1]=l=>a.key=l),placeholder:"输入密钥"},null,8,["value"])]),_:1}),t(n,{label:"密钥分组",path:"modelGroup"},{default:s(()=>[t(x,{style:{width:"100px"},value:a.modelGroup,"onUpdate:value":e[2]||(e[2]=l=>a.modelGroup=l),options:k},null,8,["value"])]),_:1}),t(n,{label:"账号",path:"account"},{default:s(()=>[t(r,{value:a.account,"onUpdate:value":e[3]||(e[3]=l=>a.account=l),placeholder:"请输入密钥所属的账号"},null,8,["value"])]),_:1}),t(n,{label:"密码",path:"password"},{default:s(()=>[t(r,{value:a.password,"onUpdate:value":e[4]||(e[4]=l=>a.password=l),placeholder:"请输入密钥所属的密码"},null,8,["value"])]),_:1}),t(n,null,{default:s(()=>[t(q(y),{"attr-type":"button",onClick:b},{default:s(()=>[I("确定添加")]),_:1})]),_:1})]),_:1},8,["model"]),t(z),t(C,{columns:w,data:_.value,pagination:d},null,8,["data","pagination"])])}}},D=V(M,[["__scopeId","data-v-78872d6b"]]);export{D as default};
