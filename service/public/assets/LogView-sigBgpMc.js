import{d as I,o as b,c as k,a as O,b as B,i as z,h as N,r as y,k as R,e as a,f as e,w as o,g,l as w,F as D,A as U,j,z as L,u as G}from"./index-nHbdToTU.js";import{_ as S}from"./_plugin-vue_export-helper-x3n3nnut.js";const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},A=O("path",{d:"M464 184h-10.9a78.72 78.72 0 0 0-16-7.18C419.5 171 396.26 168 368 168s-51.5 3-69.06 8.82c-14.06 4.69-20.25 9.86-22.25 11.87a47.94 47.94 0 0 0-41.36 0c-2-2-8.19-7.18-22.25-11.87C195.5 171 172.26 168 144 168s-51.5 3-69.06 8.82a78.72 78.72 0 0 0-16 7.18H48a16 16 0 0 0 0 32h.17c1 45.46 6.44 72.78 18.11 92.23a66.78 66.78 0 0 0 31.92 28c12.23 5.24 27.22 7.79 45.8 7.79c24.15 0 58.48-3.71 77.72-35.77c9.68-16.14 15.09-37.69 17.21-70.52A16 16 0 0 0 240 232a16 16 0 0 1 32 0a16 16 0 0 0 1.07 5.71c2.12 32.83 7.53 54.38 17.21 70.52a66.78 66.78 0 0 0 31.92 28c12.23 5.24 27.22 7.79 45.8 7.79c24.15 0 58.48-3.71 77.72-35.77c11.67-19.45 17.13-46.77 18.11-92.23h.17a16 16 0 0 0 0-32z",fill:"currentColor"},null,-1),E=[A],W=I({name:"Glasses",render:function(p,m){return b(),k("svg",J,E)}}),F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},H=B('<path d="M224 232a32 32 0 0 1 64 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M448 200h16"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M64 200H48"></path><path d="M64 200c0 96 16 128 80 128s80-32 80-128c0 0-16-16-80-16s-80 16-80 16z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M448 200c0 96-16 128-80 128s-80-32-80-128c0 0 16-16 80-16s80 16 80 16z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>',5),T=[H],C=I({name:"GlassesOutline",render:function(p,m){return b(),k("svg",F,T)}}),K=I({__name:"Register",setup(x){const p=z(),m=N(),d=y(null),n=R({userName:"",passWord:"",verifyWord:"",email:""}),c={userName:{required:!0,trigger:"blur",message:"用户名必填"},passWord:{required:!0,trigger:"blur",message:"密码必填"},verifyWord:[{required:!0,trigger:"blur",message:"密码必填"},{trigger:["input","blur"],level:"warning",validator(_,r){return d.value.model.passWord!==r?new Error("两次密码不同"):!0}}],email:{required:!0,trigger:"blur",message:"邮箱必填"}},s=_=>{var r;_.preventDefault(),(r=d.value)==null||r.validate(async i=>{if(!i){const t=await U.register(n);t.code===200?(p.success("注册成功"),await m.push({path:"/"})):p.error(t.message)}})};return(_,r)=>{const i=a("n-input"),t=a("n-form-item"),l=a("n-icon"),v=a("n-form"),f=a("n-button");return b(),k(D,null,[e(v,{id:"signUp",ref_key:"formRef",ref:d,rules:c,model:n},{default:o(()=>[e(t,{path:"userName",label:"用户名"},{default:o(()=>[e(i,{value:n.userName,"onUpdate:value":r[0]||(r[0]=u=>n.userName=u),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),e(t,{path:"passWord",label:"密码"},{default:o(()=>[e(i,{"show-password-on":"click",value:n.passWord,"onUpdate:value":r[1]||(r[1]=u=>n.passWord=u),type:"password",placeholder:"请输入密码"},{"password-visible-icon":o(()=>[e(l,{size:16,component:g(C)},null,8,["component"])]),"password-invisible-icon":o(()=>[e(l,{size:16,component:g(W)},null,8,["component"])]),_:1},8,["value"])]),_:1}),e(t,{path:"verifyWord",label:"确认密码"},{default:o(()=>[e(i,{"show-password-on":"click",value:n.verifyWord,"onUpdate:value":r[2]||(r[2]=u=>n.verifyWord=u),type:"password",placeholder:"请输入密码"},{"password-visible-icon":o(()=>[e(l,{size:16,component:g(C)},null,8,["component"])]),"password-invisible-icon":o(()=>[e(l,{size:16,component:g(W)},null,8,["component"])]),_:1},8,["value"])]),_:1}),e(t,{path:"email",label:"邮箱"},{default:o(()=>[e(i,{value:n.email,"onUpdate:value":r[3]||(r[3]=u=>n.email=u),type:"password",placeholder:"请输入邮箱"},null,8,["value"])]),_:1})]),_:1},8,["model"]),e(f,{type:"primary",block:"",secondary:"",strong:"",onClick:s},{default:o(()=>[w("注册")]),_:1})],64)}}}),P=S(K,[["__scopeId","data-v-89ae7815"]]),Q={id:"signIn"},X={__name:"LogIn",setup(x){const p=j(),m=z(),d=N(),n=y(null),c=y(!1),s=R({account:"",passWord:""}),_={account:{required:!0,trigger:"blur",message:"用户名必填"},passWord:{required:!0,trigger:"blur",message:"密码必填"}},r=t=>{var l;t.preventDefault(),(l=n.value)==null||l.validate(async v=>{if(!v){const f=await U.login(s);f.code===200?(m.success("登录成功"),p.userLoinData=f.data,await d.push("/"),i()):m.error("登录失败")}})},i=()=>{if(console.log(c.value),c.value){let t=localStorage.getItem("remember");console.log(t),t?(t=JSON.parse(t),(t.account!==s.account||t.passWord!==s.passWord)&&localStorage.setItem("remember",JSON.stringify(s))):localStorage.setItem("remember",JSON.stringify(s))}else localStorage.removeItem("remember")};return L(()=>{const t=JSON.parse(localStorage.getItem("remember"));t&&(c.value=!0,s.account=t.account,s.passWord=t.passWord)}),(t,l)=>{const v=a("n-input"),f=a("n-form-item"),u=a("n-icon"),M=a("n-form"),$=a("n-checkbox"),V=a("n-button"),q=a("n-flex");return b(),k("div",Q,[e(M,{ref_key:"formRef",ref:n,rules:_,model:s},{default:o(()=>[e(f,{path:"account",label:"用户名"},{default:o(()=>[e(v,{value:s.account,"onUpdate:value":l[0]||(l[0]=h=>s.account=h),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),e(f,{path:"passWord",label:"密码"},{default:o(()=>[e(v,{"show-password-on":"click",value:s.passWord,"onUpdate:value":l[1]||(l[1]=h=>s.passWord=h),type:"password",placeholder:"请输入密码"},{"password-visible-icon":o(()=>[e(u,{size:16,component:g(C)},null,8,["component"])]),"password-invisible-icon":o(()=>[e(u,{size:16,component:g(W)},null,8,["component"])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),e(q,{justify:"space-between",style:{"margin-bottom":"10px"}},{default:o(()=>[e($,{checked:c.value,"onUpdate:checked":l[2]||(l[2]=h=>c.value=h),style:{margin:"0 10px"}},{default:o(()=>[w(" 记住密码")]),_:1},8,["checked"]),e(V,{text:""},{default:o(()=>[w("忘记密码")]),_:1})]),_:1}),e(V,{type:"primary",block:"",secondary:"",strong:"",onClick:r},{default:o(()=>[w(" 登录")]),_:1})])}}},Y=S(X,[["__scopeId","data-v-5c5362fa"]]),Z={id:"logView"},ee={__name:"LogView",setup(x){const p=N(),m=G(),d=j();return L(()=>{var n;(n=d==null?void 0:d.userLoinData)!=null&&n.user_id&&p.push({path:"/"})}),(n,c)=>{const s=a("n-tab-pane"),_=a("n-tabs"),r=a("n-button"),i=a("n-flex"),t=a("n-card");return b(),k("div",Z,[e(t,{style:{width:"350px"}},{default:o(()=>[e(_,{"default-value":"LogIn",type:"segment",animated:""},{default:o(()=>[e(s,{name:"LogIn",tab:"登录"},{default:o(()=>[e(Y)]),_:1}),e(s,{name:"Register",tab:"注册"},{default:o(()=>[e(P)]),_:1})]),_:1}),e(i,{justify:"space-between",style:{"margin-top":"10px"}},{default:o(()=>[e(r,{text:"",onClick:c[0]||(c[0]=l=>g(m).themeChange())},{default:o(()=>[w("切换主题")]),_:1})]),_:1})]),_:1})])}}},ne=S(ee,[["__scopeId","data-v-20b6e0c0"]]);export{ne as default};
